{"version":3,"sources":["all.js"],"names":["loginEmail","document","querySelector","loginPSW","signUpEmail","signUpPSW","signUpBtn","loginBtn","api_Url","getUserId","localStorage","getItem","getUserToken","logSignPanel","logOutBtn","toAdmin","sightListArea","sightId","location","href","split","likeListArea","perSightArticle","selfRefresh","window","replace","checkLoggedIn","signUp","addEventListener","e","emailVal","value","pswVal","obj","email","password","signUpPost","alert","axios","post","then","response","console","log","data","error","token","id","loginPost","accessToken","user","setItem","login","logInChange","textContent","classList","remove","logOut","clear","setTimeout","logOutChange","add","adminChange","getSightList","sightData","get","renderSightList","dom","str","forEach","el","title","imgUrl","description","length","innerHTML","getPerSight","perSightData","renderPerSight","err","blogUrl","addToLike","alreadyInLike","likesData","headers","indicate","filter","preventDefault","target","getAttribute","addToLikePost","dom1","dom2","addToLikesGet","renderAdminLikeList","likeStr","sight","deleteLikes","querySelectorAll","deleteId"],"mappings":"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","file":"all.js","sourcesContent":["const loginEmail = document.querySelector('.loginEmail');\nconst loginPSW = document.querySelector('.loginPSW');\nconst signUpEmail = document.querySelector('.signUpEmail');\nconst signUpPSW = document.querySelector('.signUpPSW');\nconst signUpBtn = document.querySelector('.signUpBtn');\nconst loginBtn = document.querySelector('.loginBtn');\nconst api_Url = 'http://localhost:3005/';\nconst getUserId = localStorage.getItem('userId');\nconst getUserToken = localStorage.getItem('user1hrToken');\nconst logSignPanel = document.querySelector('.logSignPanel');\nconst logOutBtn = document.querySelector('.logOutBtn');\nconst toAdmin = document.querySelector('.toAdmin');\nconst sightListArea = document.querySelector('.sightListArea');\nconst sightId = location.href.split(\"=\")[1];\nconst likeListArea = document.querySelector('.likeListArea'); //後台收藏\nconst perSightArticle = document.querySelector('.perSightArticle');\n\nfunction selfRefresh(){\n  window.location.replace(location.href);\n}\n\nfunction checkLoggedIn(){\n  return getUserId && getUserToken? true : false;\n}\n\nfunction signUp(){\n  if(signUpEmail && signUpBtn && signUpPSW){\n    signUpBtn.addEventListener('click', (e) =>{\n      let emailVal = signUpEmail.value;\n      let pswVal = signUpPSW.value;\n      let obj ={};\n      obj.email = emailVal;\n      obj.password = pswVal;\n      signUpPost(obj);\n      alert('註冊成功！');\n    })\n  }\n}\n\nfunction signUpPost(obj){\n  axios.post(`${api_Url}register`,obj)\n  .then(function(response){\n  console.log(response.data);\n  })\n  .catch(function(error){\n    console.log(error);\n  })\n}\n\nlet token = '';\nlet id = '';\nfunction loginPost(obj){\n  axios.post(`${api_Url}login`,obj,)\n  .then(function(response){\n  console.log(response.data);\n  token = response.data.accessToken;\n  id = response.data.user.id;\n  localStorage.setItem('user1hrToken',token);\n  localStorage.setItem('userId',id);\n  loginEmail.value = \"\";\n  loginPSW.value = \"\";\n  alert('登入成功');\n  location.href = '/index.html';\n  })\n  .catch(function(error){\n    console.log(error);\n    alert('帳號或密碼不存在，請重新輸入');\n  })\n}\n\nfunction login(){\n  if(loginEmail && loginPSW && loginBtn){\n    loginBtn.addEventListener('click', (e) =>{\n     let emailVal = loginEmail.value;\n     let pswVal = loginPSW.value;\n     let obj ={};\n     obj.email = emailVal;\n     obj.password = pswVal;\n     loginPost(obj);\n     })\n  }\n}\n\nfunction logInChange(){\n  if(getUserId&&getUserToken){\n    logSignPanel.textContent = '';\n    toAdmin.classList.remove('display-none');\n  }\n}\n\nfunction logOut(){\n  if(logOutBtn){\n    logOutBtn.addEventListener('click', (e) =>{\n      console.log('有點到');\n      localStorage.clear();\n      setTimeout(() => {\n        window.location.replace('/'); //導回首頁\n      }, 300);\n})\n}\n}\n\nfunction logOutChange(){\n  if(!getUserId&&!getUserToken){\n    logOutBtn.classList.add('display-none');\n  }\n}\n\nsignUp();\nlogin();\nlogInChange();\nlogOut();\nlogOutChange();\nadminChange();\n\nfunction adminChange(){\n  if(likeListArea){\n    toAdmin.classList.add('display-none');\n  }\n}\n\n//以上登入註冊區\n\nif(sightListArea){\n  getSightList();\n}\n\nlet sightData = [];\nfunction getSightList(){\n  axios.get(`${api_Url}sights`)\n  .then(response =>{\n    console.log(response.data);\n    sightData = response.data;\n    renderSightList(sightListArea,sightData);\n  })\n  .catch(error =>{\n    console.log(error);\n    //alert('資料庫異常');\n  })\n}\n//首頁渲染產品列表\nfunction renderSightList(dom,data){\n   let str ='';\n   data.forEach(el =>{\n    const {title, imgUrl, description, id} = el;\n    if(data.length>0){\n      str+=`<div class=\"col-lg-3 card my-4 mx-3\" style=\"width: 18rem;\">\n      <img src=\"${imgUrl}\" class=\"card-img-top\" alt=\"\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">${title}</h5>\n        <p class=\"card-text\">${description}</p>\n        <a href=\"/article.html?id=${id}\" class=\"btn btn-primary text-white\">看更多資訊...</a>\n      </div>\n    </div>`;\n    }else{\n      return '';\n    }\n    dom.innerHTML = str;\n   })\n}\n\n//單頁article get\nif(perSightArticle){\n  getPerSight();\n}\nlet perSightData = {};\nfunction getPerSight(){\n  axios.get(`${api_Url}sights/${sightId}`)\n  .then(response =>{\n    console.log(response.data);\n    perSightData = response.data;\n    console.log(perSightArticle);\n    renderPerSight(perSightArticle,perSightData);\n  })\n  .catch(err =>{\n    console.log(err);\n  })\n}\n//渲染單頁景點文章\nfunction renderPerSight(dom,data){\n    const {title, imgUrl, description, blogUrl, id} = data;\n    dom.innerHTML =`<div class=\"d-flex flex-column align-items-center\">\n    <img src=\"${imgUrl}\" class=\"article-img\" alt=\"\">\n    <div class=\"card-body-article\">\n      <h5 class=\"card-title\">${title}</h5>\n      <p class=\"card-text\">${description}</p>\n      <div class=\"btnArea d-flex justify-content-between\">\n      <a target=\"_blank\" href=\"${blogUrl}\" class=\"btn btn-secondary text-white mt-4 me-8\">點我看參考部落格文章！</a>\n      <button class=\"btn btn-info text-white mt-4 ms-8 addToLike\" data-id=\"${id}\">♡ 收藏</button>\n      <button class=\"disabled btn btn-success text-white mt-4 ms-8 alreadyInLike\" data-id=\"${id}\">&#10003;已收藏</button>\n    </div>\n    </div>\n  </div>`;\n\n  const addToLike = document.querySelector('.addToLike');\n  const alreadyInLike = document.querySelector('.alreadyInLike');\n  if(true){\n\n  }\n  let likesData = [];\n\n  if(checkLoggedIn())\n  {axios.get(`${api_Url}600/users/${getUserId}/likes?_expand=sight`,{\n    headers:{\n      \"authorization\": `Bearer ${getUserToken}`\n    }\n  })\n  .then(response =>{\n   likesData = response.data;\n   console.log(likesData);\n   console.log(sightId);\n   let indicate = likesData.filter(el =>{return el.sightId == sightId});\n   console.log(indicate);\n   if(indicate.length!=0){\n    addToLike.classList.add('display-none');\n   }else{\n    alreadyInLike.classList.add('display-none');\n   }\n\n  })\n  .catch(error =>{\n    console.log(error);\n  });\n  }else{\n    addToLike.classList.add('display-none');\n    alreadyInLike.classList.add('display-none');\n  }\n  console.log(addToLike);\n  addToLike.addEventListener('click', (e) =>{\n    e.preventDefault();\n    let sightId = e.target.getAttribute('data-id');\n    let obj = {};\n    obj.sightId = sightId;\n    addToLikePost(obj,addToLike,alreadyInLike);\n  })\n //收藏功能記得加到這，總\n}\n\n//收藏功能\n//監聽收藏按鈕\n\nfunction addToLikePost(obj,dom1,dom2){\n  axios.post(`${api_Url}600/users/${getUserId}/likes`,obj,{\n    headers:{\n      \"authorization\": `Bearer ${getUserToken}`\n    }\n  })\n  .then(response =>{\n  console.log(response.data);\n  console.log(getUserToken);\n  dom1.classList.add('display-none');\n  dom2.classList.remove('display-none');\n  })\n  .catch(error =>{\n    console.log(error);\n    console.log(getUserToken);\n  });\n}\n\naddToLikesGet();\nlet likesData = [];\nfunction addToLikesGet(){\n  axios.get(`${api_Url}600/users/${getUserId}/likes?_expand=sight`,{\n    headers:{\n      \"authorization\": `Bearer ${getUserToken}`\n    }\n  })\n  .then(response =>{\n  console.log(response.data);\n  likesData = response.data;\n  renderAdminLikeList(likeListArea,likesData);\n  })\n  .catch(error =>{\n    console.log(error);\n  });\n}\n\n\n//渲染後台收藏列表\nfunction renderAdminLikeList(dom,data){\n   let likeStr = '';\n   data.forEach(el =>{\n    const {id} = el;\n    const {title, imgUrl, description} = el.sight;\n    likeStr += `<div class=\"card my-4 d-flex flex-row likePerCard\">\n    <img src=\"${imgUrl}\" class=\"card-img-top\" alt=\"\">\n    <div class=\"card-body\">\n      <h5 class=\"card-title\">${title}</h5>\n      <p class=\"card-text\">${description}</p>\n      <span class=\"text-success\">&#10003;已收藏</span><button href=\"#\" class=\"btn btn-warning text-white ms-4 deleteLikes\" data-id=\"${id}\">取消收藏</button>\n    </div>\n  </div>`;\n    dom.innerHTML = likeStr;\n   })\n   const deleteLikes = document.querySelectorAll('.deleteLikes');\n   deleteLikes.forEach(el => {\n   el.addEventListener('click', (e) =>{\n    let deleteId = e.target.getAttribute('data-id');\n   \n    axios.delete(`${api_Url}600/likes/${deleteId}`,{\n      headers:{\n        \"authorization\": `Bearer ${getUserToken}`\n      }\n    })\n    .then(response =>{\n      console.log(response.data);\n      alert('成功取消收藏！');\n      selfRefresh();\n    })\n    .catch(error =>{\n      console.log(error);\n    })\n   })\n\n  })\n}\n\n\n\n\n\n"]}